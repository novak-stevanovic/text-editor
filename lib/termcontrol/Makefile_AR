.PHONY: build

CC = gcc
C_SRC_FLAGS = -Iinclude
# C_SO_FLAGS = -Iinclude -fPIC -shared

C_SRC = $(shell find src -name *.c)
C_OBJ = $(patsubst src/%.c,build/%.o,$(C_SRC))

AR_LIB = libtermcontrol.a

$(AR_LIB): $(C_OBJ)
	ar rcs $(AR_LIB) $(C_OBJ)

$(C_OBJ): $(C_SRC) build
	$(CC) $(C_SRC_FLAGS) -c $< -o $@

build:
	mkdir -p build/

clean:
	rm -rf build
	rm -f compile_commands.json
	rm -f $(AR_LIB)

